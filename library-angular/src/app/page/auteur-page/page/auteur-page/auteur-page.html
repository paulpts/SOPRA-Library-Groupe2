<h1>Liste des auteurs</h1>

<form (ngSubmit)="creerOuModifier()" [formGroup]="auteurForm">
  <div>
    <label for="nom">Nom :</label>
    <input id="nom" type="text" formControlName="nom" />
    <span *ngIf="nomCtrl.hasError('required')">Le nom est obligatoire</span>
  </div>

  <div>
    <label for="prenom">Prénom :</label>
    <input id="prenom" type="text" formControlName="prenom" />
    <span *ngIf="prenomCtrl.hasError('required')">Le prénom est obligatoire</span>
  </div>

  <div>
    <label for="nationalite">Nationalité :</label>
    <input id="nationalite" type="text" formControlName="nationalite" />
    <span *ngIf="nationaliteCtrl.hasError('required')">La nationalité est obligatoire</span>
  </div>

  <div>
    <input 
      type="submit" 
      [disabled]="auteurForm.invalid" 
      [value]="editingAuteur ? 'Modifier' : 'Créer'" 
    />
  </div>
</form>

<hr />

<table>
  <thead>
    <tr>
      <th>Nom</th>
      <th>Prénom</th>
      <th>Nationalité</th>
      <th>Actions</th>
    </tr>
  </thead>

  <tbody>
    <tr *ngFor="let auteur of auteurs$ | async; trackBy: trackAuteur">
      <td>{{ auteur.nom }}</td>
      <td>{{ auteur.prenom }}</td>
      <td>{{ auteur.nationalite }}</td>
      <td>
        <button (click)="editer(auteur)">Modifier</button>
        <button (click)="supprimer(auteur)">Supprimer</button>
      </td>
    </tr>
  </tbody>
</table>
